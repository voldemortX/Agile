(function(t){function e(e){for(var a,n,o=e[0],s=e[1],u=e[2],f=0,d=[];f<o.length;f++)n=o[f],r[n]&&d.push(r[n][0]),r[n]=0;for(a in s)Object.prototype.hasOwnProperty.call(s,a)&&(t[a]=s[a]);c&&c(e);while(d.length)d.shift()();return i.push.apply(i,u||[]),l()}function l(){for(var t,e=0;e<i.length;e++){for(var l=i[e],a=!0,o=1;o<l.length;o++){var s=l[o];0!==r[s]&&(a=!1)}a&&(i.splice(e--,1),t=n(n.s=l[0]))}return t}var a={},r={app:0},i=[];function n(e){if(a[e])return a[e].exports;var l=a[e]={i:e,l:!1,exports:{}};return t[e].call(l.exports,l,l.exports,n),l.l=!0,l.exports}n.m=t,n.c=a,n.d=function(t,e,l){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:l})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var l=Object.create(null);if(n.r(l),Object.defineProperty(l,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)n.d(l,a,function(e){return t[e]}.bind(null,a));return l},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],s=o.push.bind(o);o.push=e,o=o.slice();for(var u=0;u<o.length;u++)e(o[u]);var c=s;i.push([0,"chunk-vendors"]),l()})({0:function(t,e,l){t.exports=l("56d7")},"034f":function(t,e,l){"use strict";var a=l("64a9"),r=l.n(a);r.a},"04dd":function(t,e,l){},1:function(t,e){},2060:function(t,e,l){"use strict";var a=l("8516"),r=l.n(a);r.a},"383e":function(t,e,l){"use strict";var a=l("04dd"),r=l.n(a);r.a},"56d7":function(t,e,l){"use strict";l.r(e);l("cadf"),l("551c"),l("f751"),l("097d");var a=l("2b0e"),r=function(){var t=this,e=t.$createElement,l=t._self._c||e;return l("div",{staticClass:"bg-global",attrs:{id:"app"}},[l("router-view")],1)},i=[],n=(l("034f"),l("2877")),o={},s=Object(n["a"])(o,r,i,!1,null,null,null),u=s.exports,c=l("5c96"),f=l.n(c);l("0fae");a["default"].use(f.a);var d=l("8c4f"),b=function(){var t=this,e=t.$createElement,l=t._self._c||e;return l("div",{staticClass:"top-align"},[l("h1",[t._v("风险评估系统")]),l("el-row",[l("el-col",{attrs:{span:10}},[l("div",{staticClass:"grid-content"})]),l("el-col",{attrs:{span:4}},[l("div",{staticClass:"bg-light"},[l("el-row",[l("div",{staticClass:"grid-content bg-dark"})]),l("el-form",{attrs:{"label-position":t.labelPosition}},[l("el-form-item",[l("el-input",{attrs:{name:"username","prefix-icon":"el-icon-arrow-right",size:"medium",placeholder:"用户名"},model:{value:t.username,callback:function(e){t.username=e},expression:"username"}})],1),l("el-form-item",[l("el-input",{attrs:{name:"password","prefix-icon":"el-icon-arrow-right",size:"medium",type:"password",placeholder:"密码"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1),l("el-form-item",[l("el-button",{attrs:{name:"login",type:"success",round:""},nativeOn:{click:function(e){return t.login_click(e)}}},[t._v("登录")]),l("el-button",{attrs:{name:"register",round:"",plain:""},nativeOn:{click:function(e){return t.register_click(e)}}},[t._v("注册")]),l("p",{staticClass:"error"},[t._v(t._s(t.errorMessage))])],1)],1)],1)]),l("el-col",{attrs:{span:10}},[l("div",{staticClass:"grid-content"})])],1)],1)},m=[],h=l("f499"),v=l.n(h),p={name:"login",data:function(){return{labelPosition:"right",username:"",password:"",errorMessage:""}},methods:{dump:function(){this.username="",this.password=""},register_click:function(){var t=this;this.$http({method:"POST",url:"/auth/register",emulateJSON:!0,body:v()({username:this.username,password:this.password})}).then(function(e){e.ok&&0===e.body.status?t.errorMessage="注册成功！":t.errorMessage=e.body.error},function(e){t.errorMessage=e.body.error})},login_click:function(){var t=this;this.$http({method:"POST",url:"/auth/login",emulateJSON:!0,body:v()({username:this.username,password:this.password})}).then(function(e){e.ok&&0===e.body.status?t.$router.push({path:"/mainPage"}):t.errorMessage=e.body.error},function(e){t.errorMessage=e.body.error})}}},y=p,g=(l("8e5e"),Object(n["a"])(y,b,m,!1,null,"22ae897a",null)),k=g.exports,x=function(){var t=this,e=t.$createElement,l=t._self._c||e;return l("div",[l("el-container",[l("el-header",{staticStyle:{"text-align":"center","vertical-align":"middle","font-size":"40px",height:"100px"}},[l("el-row"),l("span",[t._v("风险评估系统")])],1),l("el-main",{staticStyle:{"text-align":"center","background-color":"#000000"}},[l("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.getnew()}}},[t._v("新建 +")])],1)],1),l("el-container",[l("el-header",{staticStyle:{"text-align":"center","font-size":"24px","background-color":"#DCDCDC",color:"#000000",height:"70px"}},[l("span",[t._v("已评估系统")])]),l("el-main",[l("el-table",{attrs:{data:t.tableData,border:"","header-cell-style":{background:"#FFFFFF"},"cell-style":{background:"#FFFFFF"}}},[l("el-table-column",{attrs:{prop:"systemname",label:"SystemID",width:"250"}}),l("el-table-column",{attrs:{prop:"method",label:"Method",width:"140"}}),l("el-table-column",{attrs:{prop:"results",label:"Result",width:"100"}}),l("el-table-column",{attrs:{prop:"createtime",label:"CreateTime",width:"200"}}),l("el-table-column",{attrs:{prop:"description",label:"Description"}}),l("el-table-column",{attrs:{fixed:"right",label:"操作",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[l("el-button",{staticStyle:{"font-size":"16px",width:"38px",height:"20px"},attrs:{type:"text",size:"small"},on:{click:function(l){return t.handleClick(e.row)}}},[t._v("修改")]),l("el-button",{staticStyle:{"font-size":"16px",width:"38px",height:"20px"},attrs:{type:"text",size:"small"}},[t._v("删除")])]}}])})],1)],1)],1)],1)},w=[],_={name:"mainPage",methods:{handleClick:function(t){this.$http.get("/new?"+t.systemname).then(function(t){console.log(t)}).catch(function(t){console.log(t)})},getnew:function(){this.$router.push({path:"/new"})}},data:function(){return{tableData:[{systemname:"system1",method:"矩阵法",results:"5",createtime:"2019/04/25 10:20:00",description:"blablablabla"}]}}},F=_,V=(l("e18c"),l("2060"),Object(n["a"])(F,x,w,!1,null,"73b70397",null)),O=V.exports,A=function(){var t=this,e=t.$createElement,l=t._self._c||e;return l("div",[l("el-container",{attrs:{width:"200px"}},[l("el-header",{staticStyle:{"text-align":"center","vertical-align":"middle","font-size":"40px",height:"100px"}},[l("el-row"),l("span",[t._v("风险评估")])],1),l("el-main",{staticStyle:{"text-align":"center","background-color":"#000000"}},[l("el-row",[l("el-radio-group",{model:{value:t.method,callback:function(e){t.method=e},expression:"method"}},[l("el-radio",{attrs:{label:0}},[t._v("相乘法")]),l("el-radio",{attrs:{label:1}},[t._v("矩阵法")])],1)],1),l("el-row",[l("el-button",{attrs:{type:"primary"},nativeOn:{click:function(e){return t.calcClick(e)}}},[t._v("提交")])],1)],1),l("el-main",{staticStyle:{"text-align":"center"}},[l("el-tabs",{nativeOn:{"tab-click":function(e){return t.handleClick(e)}},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[l("el-tab-pane",{attrs:{label:"评估准备",name:"first"}},[l("el-divider",{attrs:{"content-position":"left"}},[t._v("评估目标")]),l("el-input",{attrs:{type:"textarea",rows:5,placeholder:"请输入内容"},model:{value:t.aim,callback:function(e){t.aim=e},expression:"aim"}}),l("el-divider",{attrs:{"content-position":"left"}},[t._v("评估范围")]),l("el-input",{attrs:{type:"textarea",rows:5,placeholder:"请输入内容"},model:{value:t.range,callback:function(e){t.range=e},expression:"range"}}),l("el-divider",{attrs:{"content-position":"left"}},[t._v("组建团队成员")]),l("el-input",{attrs:{type:"textarea",rows:5,placeholder:"请输入内容"},model:{value:t.team,callback:function(e){t.team=e},expression:"team"}})],1),l("el-tab-pane",{attrs:{label:"资产评估",name:"second"}},[l("div",{staticStyle:{float:"left"}},[l("el-button",{attrs:{type:"add"},nativeOn:{click:function(e){t.assetDialogVisible=!0}}},[t._v("添加")]),l("el-button",{attrs:{type:"modify"}},[t._v("修改")]),l("el-button",{attrs:{type:"delete"}},[t._v("删除")])],1),l("el-table",{attrs:{data:t.tableAsset,border:"","header-cell-style":{background:"#FFFFFF"},"cell-style":{background:"#FFFFFF"}}},[l("el-table-column",{attrs:{prop:"asset",label:"资产名称",width:"260"}}),l("el-table-column",{attrs:{prop:"integrity",label:"保密性",width:"140"}}),l("el-table-column",{attrs:{prop:"availability",label:"可用性",width:"140"}}),l("el-table-column",{attrs:{prop:"confidentiality",label:"完整性",width:"140"}}),l("el-table-column",{attrs:{prop:"rank",label:"资产价值",width:"140"}}),l("el-table-column",{attrs:{prop:"details",label:"描述"}})],1)],1),l("el-tab-pane",{attrs:{label:"脆弱性评估",name:"third"}},[l("div",{staticStyle:{float:"left"}},[l("el-button",{attrs:{type:"add"},nativeOn:{click:function(e){t.vulDialogVisible=!0}}},[t._v("添加")]),l("el-button",{attrs:{type:"modify"}},[t._v("修改")]),l("el-button",{attrs:{type:"delete"}},[t._v("删除")])],1),l("el-table",{attrs:{data:t.tableVul,border:"","header-cell-style":{background:"#FFFFFF"},"cell-style":{background:"#FFFFFF"}}},[l("el-table-column",{attrs:{prop:"vulnerability",label:"脆弱性名称",width:"260"}}),l("el-table-column",{attrs:{prop:"rank",label:"脆弱性等级",width:"140"}}),l("el-table-column",{attrs:{prop:"va",label:"资产关联",width:"140"}}),l("el-table-column",{attrs:{prop:"details",label:"描述"}})],1)],1),l("el-tab-pane",{attrs:{label:"威胁评估",name:"fourth"}},[l("div",{staticStyle:{float:"left"}},[l("el-button",{attrs:{type:"add"},nativeOn:{click:function(e){t.threatDialogVisible=!0}}},[t._v("添加")]),l("el-button",{attrs:{type:"modify"}},[t._v("修改")]),l("el-button",{attrs:{type:"delete"}},[t._v("删除")])],1),l("el-table",{attrs:{data:t.tableThreat,border:"","header-cell-style":{background:"#FFFFFF"},"cell-style":{background:"#FFFFFF"}}},[l("el-table-column",{attrs:{prop:"threat",label:"威胁名称",width:"260"}}),l("el-table-column",{attrs:{prop:"rank",label:"威胁等级",width:"140"}}),l("el-table-column",{attrs:{prop:"tv",label:"威胁的脆弱性关联",width:"140"}}),l("el-table-column",{attrs:{prop:"details",label:"描述"}})],1)],1)],1)],1)],1),l("el-dialog",{attrs:{title:"添加资产",visible:t.assetDialogVisible,"modal-append-to-body":!1},on:{"update:visible":function(e){t.assetDialogVisible=e}}},[l("el-form",{attrs:{model:t.formAsset}},[l("el-form-item",{attrs:{label:"资产名称","label-width":t.formLabelWidth}},[l("el-input",{attrs:{autocomplete:"off",width:"200px"},model:{value:t.formAsset.name,callback:function(e){t.$set(t.formAsset,"name",e)},expression:"formAsset.name"}})],1),l("el-form-item",{attrs:{label:"机密性","label-width":t.formLabelWidth}},[l("el-select",{attrs:{placeholder:"请选择安全等级"},model:{value:t.formAsset.confidentiality,callback:function(e){t.$set(t.formAsset,"confidentiality",e)},expression:"formAsset.confidentiality"}},[l("el-option",{attrs:{label:"很高",value:"5"}}),l("el-option",{attrs:{label:"高",value:"4"}}),l("el-option",{attrs:{label:"中",value:"3"}}),l("el-option",{attrs:{label:"低",value:"2"}}),l("el-option",{attrs:{label:"很低",value:"1"}})],1)],1),l("el-form-item",{attrs:{label:"完整性","label-width":t.formLabelWidth}},[l("el-select",{attrs:{placeholder:"请选择安全等级"},model:{value:t.formAsset.integrity,callback:function(e){t.$set(t.formAsset,"integrity",e)},expression:"formAsset.integrity"}},[l("el-option",{attrs:{label:"很高",value:"5"}}),l("el-option",{attrs:{label:"高",value:"4"}}),l("el-option",{attrs:{label:"中",value:"3"}}),l("el-option",{attrs:{label:"低",value:"2"}}),l("el-option",{attrs:{label:"很低",value:"1"}})],1)],1),l("el-form-item",{attrs:{label:"可用性","label-width":t.formLabelWidth}},[l("el-select",{attrs:{placeholder:"请选择安全等级"},model:{value:t.formAsset.availability,callback:function(e){t.$set(t.formAsset,"availability",e)},expression:"formAsset.availability"}},[l("el-option",{attrs:{label:"很高",value:"5"}}),l("el-option",{attrs:{label:"高",value:"4"}}),l("el-option",{attrs:{label:"中",value:"3"}}),l("el-option",{attrs:{label:"低",value:"2"}}),l("el-option",{attrs:{label:"很低",value:"1"}})],1)],1),l("el-form-item",[l("el-input",{attrs:{type:"textarea",rows:5,placeholder:"请输入资产描述"},model:{value:t.formAsset.details,callback:function(e){t.$set(t.formAsset,"details",e)},expression:"formAsset.details"}})],1)],1),l("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[l("el-button",{nativeOn:{click:function(e){t.assetDialogVisible=!1}}},[t._v("取 消")]),l("el-button",{attrs:{type:"primary"},nativeOn:{click:function(e){return t.formAssertClick(-1)}}},[t._v("确 定")])],1)],1),l("el-dialog",{attrs:{title:"添加脆弱性",visible:t.vulDialogVisible,"modal-append-to-body":!1},on:{"update:visible":function(e){t.vulDialogVisible=e}}},[l("el-form",{attrs:{model:t.formVul}},[l("el-form-item",{attrs:{label:"脆弱性名称","label-width":t.formLabelWidth}},[l("el-input",{attrs:{autocomplete:"off",width:"200px"},model:{value:t.formVul.name,callback:function(e){t.$set(t.formVul,"name",e)},expression:"formVul.name"}})],1),l("el-form-item",{attrs:{label:"脆弱性等级","label-width":t.formLabelWidth}},[l("el-select",{attrs:{placeholder:"请选择等级"},model:{value:t.formVul.rank,callback:function(e){t.$set(t.formVul,"rank",e)},expression:"formVul.rank"}},[l("el-option",{attrs:{label:"很高",value:"5"}}),l("el-option",{attrs:{label:"高",value:"4"}}),l("el-option",{attrs:{label:"中",value:"3"}}),l("el-option",{attrs:{label:"低",value:"2"}}),l("el-option",{attrs:{label:"很低",value:"1"}})],1)],1),l("el-form-item",{attrs:{label:"关联已有资产","label-width":t.formLabelWidth}},[l("el-checkbox-group",{model:{value:t.formVul.va,callback:function(e){t.$set(t.formVul,"va",e)},expression:"formVul.va"}},t._l(t.tableAsset,function(e){return l("el-checkbox",{key:e.asset,attrs:{label:e.asset}},[t._v(t._s(e.asset))])}),1)],1),l("el-form-item",[l("el-input",{attrs:{type:"textarea",rows:5,placeholder:"请输入脆弱性描述"},model:{value:t.formVul.details,callback:function(e){t.$set(t.formVul,"details",e)},expression:"formVul.details"}})],1)],1),l("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[l("el-button",{nativeOn:{click:function(e){t.vulDialogVisible=!1}}},[t._v("取 消")]),l("el-button",{attrs:{type:"primary"},nativeOn:{click:function(e){return t.formVulClick(-1)}}},[t._v("确 定")])],1)],1),l("el-dialog",{attrs:{title:"添加威胁",visible:t.threatDialogVisible,"modal-append-to-body":!1},on:{"update:visible":function(e){t.threatDialogVisible=e}}},[l("el-form",{attrs:{model:t.formThreat}},[l("el-form-item",{attrs:{label:"威胁名称","label-width":t.formLabelWidth}},[l("el-input",{attrs:{autocomplete:"off",width:"200px"},model:{value:t.formThreat.name,callback:function(e){t.$set(t.formThreat,"name",e)},expression:"formThreat.name"}})],1),l("el-form-item",{attrs:{label:"威胁等级","label-width":t.formLabelWidth}},[l("el-select",{attrs:{placeholder:"请选择等级"},model:{value:t.formThreat.rank,callback:function(e){t.$set(t.formThreat,"rank",e)},expression:"formThreat.rank"}},[l("el-option",{attrs:{label:"很高",value:"5"}}),l("el-option",{attrs:{label:"高",value:"4"}}),l("el-option",{attrs:{label:"中",value:"3"}}),l("el-option",{attrs:{label:"低",value:"2"}}),l("el-option",{attrs:{label:"很低",value:"1"}})],1)],1),l("el-form-item",{attrs:{label:"关联已有脆弱性","label-width":t.formLabelWidth}},[l("el-checkbox-group",{model:{value:t.formThreat.tv,callback:function(e){t.$set(t.formThreat,"tv",e)},expression:"formThreat.tv"}},t._l(t.tableVul,function(e){return l("el-checkbox",{key:e.vulnerability,attrs:{label:e.vulnerability}},[t._v(t._s(e.vulnerability))])}),1)],1),l("el-form-item",[l("el-input",{attrs:{type:"textarea",rows:5,placeholder:"请输入脆弱性描述"},model:{value:t.formVul.details,callback:function(e){t.$set(t.formVul,"details",e)},expression:"formVul.details"}})],1)],1),l("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[l("el-button",{nativeOn:{click:function(e){t.threatDialogVisible=!1}}},[t._v("取 消")]),l("el-button",{attrs:{type:"primary"},nativeOn:{click:function(e){return t.formThreatClick(-1)}}},[t._v("确 定")])],1)],1),l("el-dialog",{attrs:{title:"评估结果",visible:t.resultDialogVisible,"modal-append-to-body":!1},on:{"update:visible":function(e){t.resultDialogVisible=e}}},[l("el-table",{attrs:{data:t.tva_results,border:"","header-cell-style":{background:"#FFFFFF"},"cell-style":{background:"#FFFFFF"}}},[l("el-table-column",{attrs:{prop:"asset",label:"资产名称",width:"140"}}),l("el-table-column",{attrs:{prop:"threat",label:"威胁名称",width:"140"}}),l("el-table-column",{attrs:{prop:"vulnerability",label:"脆弱性名称",width:"140"}}),l("el-table-column",{attrs:{prop:"level",label:"风险等级",width:"140"}})],1),l("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[l("el-button",{nativeOn:{click:function(e){t.resultDialogVisible=!1}}},[t._v("取 消")]),l("el-button",{attrs:{type:"primary"},nativeOn:{click:function(e){return t.submitClick(e)}}},[t._v("确 定")])],1)],1)],1)},T=[],S=(l("6b54"),l("5d73")),D=l.n(S),C=(l("7f7f"),[[1,1,2,2,3],[1,1,2,3,4],[1,2,3,3,4],[1,2,3,3,5],[2,2,4,5,5]]),$=[[1,1,2,2,3],[1,2,2,3,4],[1,2,3,3,4],[2,2,3,4,5],[2,3,4,4,5]],M=[[1,1,2,2,3],[1,2,2,3,3],[1,2,3,3,4],[2,2,3,4,4],[2,3,4,4,5]],P=["很低","低","中","高","很高"],j={name:"_new",data:function(){return{activeName:"first",formLabelWidth:"120px",assetDialogVisible:!1,threatDialogVisible:!1,vulDialogVisible:!1,resultDialogVisible:!1,aim:"",range:"",team:"",tableAsset:[{asset:"测试资产5",confidentiality:"很高",integrity:"中",availability:"很低",rank:"很高",details:"blabla"},{asset:"测试资产4",confidentiality:"高",integrity:"中",availability:"很低",rank:"高",details:"blabla"}],tableVul:[{vulnerability:"测试脆弱性5",rank:"很高",vaString:"测试资产5,测试资产4",va:["测试资产5","测试资产4"],details:"bla"},{vulnerability:"测试脆弱性3",rank:"中",vaString:"测试资产5",va:["测试资产5"],details:"bla"}],tableThreat:[{threat:"测试威胁3",rank:"中",tvString:"测试脆弱性5,测试脆弱性3",tv:["测试脆弱性5","测试脆弱性3"],details:"bla"},{threat:"测试威胁1",rank:"很低",tvString:"测试脆弱性5",tv:["测试脆弱性5"],details:"bla"}],formAsset:{name:"",availability:null,integrity:null,confidentiality:null,details:""},formThreat:{name:"",rank:null,tv:[],details:""},formVul:{name:"",rank:null,va:[],details:""},systemname:"test1",method:0,tva_results:[]}},methods:{levelMultiply:function(t){return Math.ceil((t-1)/5)},messageBox:function(t,e){this.$alert(e,t,{confirmButtonText:"确定"})},handleClick:function(t,e){console.log(t,e)},formAssertClick:function(t){if(""===this.formAsset.name||null===this.formAsset.confidentiality||null===this.formAsset.integrity||null===this.formAsset.availability)this.messageBox("错误提示","请完整填写必要信息！");else{var e=this.formAsset.availability;this.formAsset.integrity>e&&(e=this.formAsset.integrity),this.formAsset.confidentiality>e&&(e=this.formAsset.confidentiality);var l={asset:this.formAsset.name,confidentiality:P[this.formAsset.confidentiality-1],integrity:P[this.formAsset.integrity-1],availability:P[this.formAsset.availability-1],rank:P[e-1]};if(-1!==t)this.tableAsset[t]=l;else{var a=!0,r=!1,i=void 0;try{for(var n,o=D()(this.tableAsset);!(a=(n=o.next()).done);a=!0){var s=n.value;if(s.asset===l.asset)return void this.messageBox("错误提示","资产已存在！")}}catch(u){r=!0,i=u}finally{try{a||null==o.return||o.return()}finally{if(r)throw i}}this.tableAsset.push(l)}this.formAsset={name:"",availability:null,integrity:null,confidentiality:null},this.assetDialogVisible=!1}},formThreatClick:function(t){if(""===this.formThreat.name||null===this.formThreat.rank)this.messageBox("错误提示","请完整填写必要信息！");else{var e={threat:this.formThreat.name,tv:this.formThreat.tv,tvString:this.formThreat.tv.toString(),details:this.formThreat.details,rank:P[this.formThreat.rank-1]};if(-1!==t)this.tableThreat[t]=e;else{var l=!0,a=!1,r=void 0;try{for(var i,n=D()(this.tableThreat);!(l=(i=n.next()).done);l=!0){var o=i.value;if(o.threat===e.threat)return void this.messageBox("错误提示","脆弱性已存在！")}}catch(s){a=!0,r=s}finally{try{l||null==n.return||n.return()}finally{if(a)throw r}}this.tableThreat.push(e)}this.formThreat={name:"",rank:null,tv:[],details:""},this.threatDialogVisible=!1}},formVulClick:function(t){if(""===this.formVul.name||null===this.formVul.rank)this.messageBox("错误提示","请完整填写必要信息！");else{var e={vulnerability:this.formVul.name,va:this.formVul.va,vaString:this.formVul.va.toString(),details:this.formVul.details,rank:P[this.formVul.rank-1]};if(-1!==t)this.tableVul[t]=e;else{var l=!0,a=!1,r=void 0;try{for(var i,n=D()(this.tableVul);!(l=(i=n.next()).done);l=!0){var o=i.value;if(o.vulnerability===e.vulnerability)return void this.messageBox("错误提示","脆弱性已存在！")}}catch(s){a=!0,r=s}finally{try{l||null==n.return||n.return()}finally{if(a)throw r}}this.tableVul.push(e)}this.formVul={name:"",rank:null,va:[],details:""},this.vulDialogVisible=!1}},calcClick:function(){this.tva_results=[];var t=!0,e=!1,l=void 0;try{for(var a,r=D()(this.tableVul);!(t=(a=r.next()).done);t=!0){var i=a.value,n=!0,o=!1,s=void 0;try{for(var u,c=D()(this.tableThreat);!(n=(u=c.next()).done);n=!0){var f=u.value,d=!1,b=!0,m=!1,h=void 0;try{for(var v,p=D()(f.tv);!(b=(v=p.next()).done);b=!0){var y=v.value;if(y===i.vulnerability){d=!0;break}}}catch(W){m=!0,h=W}finally{try{b||null==p.return||p.return()}finally{if(m)throw h}}if(!0===d){var g=!0,k=!1,x=void 0;try{for(var w,_=D()(this.tableAsset);!(g=(w=_.next()).done);g=!0){var F=w.value;d=!1;var V=!0,O=!1,A=void 0;try{for(var T,S=D()(i.va);!(V=(T=S.next()).done);V=!0){var j=T.value;if(j===F.asset){d=!0;break}}}catch(W){O=!0,A=W}finally{try{V||null==S.return||S.return()}finally{if(O)throw A}}if(!0===d){var B={asset:F.asset,vulnerability:i.vulnerability,threat:f.threat,level:0};if(0===this.method){var L=Math.sqrt((P.indexOf(F.rank)+1)*(P.indexOf(i.rank)+1))*Math.sqrt((P.indexOf(i.rank)+1)*(P.indexOf(f.rank)+1));B.level=this.levelMultiply(L)}else B.level=M[C[P.indexOf(F.rank)][P.indexOf(i.rank)]-1][$[P.indexOf(f.rank)][P.indexOf(i.rank)]-1];this.tva_results.push(B)}}}catch(W){k=!0,x=W}finally{try{g||null==_.return||_.return()}finally{if(k)throw x}}}}}catch(W){o=!0,s=W}finally{try{n||null==c.return||c.return()}finally{if(o)throw s}}}}catch(W){e=!0,l=W}finally{try{t||null==r.return||r.return()}finally{if(e)throw l}}this.resultDialogVisible=!0},submitClick:function(){var t=this,e="相乘法";1===this.method&&(e="矩阵法");var l=[],a=[],r=[],i=!0,n=!1,o=void 0;try{for(var s,u=D()(this.tableAsset);!(i=(s=u.next()).done);i=!0){var c=s.value,f={assetname:c.asset,val:P.indexOf(c.rank)+1,description:c.details};l.push(f)}}catch(A){n=!0,o=A}finally{try{i||null==u.return||u.return()}finally{if(n)throw o}}var d=!0,b=!1,m=void 0;try{for(var h,p=D()(this.tableThreat);!(d=(h=p.next()).done);d=!0){var y=h.value,g={threatname:y.threat,val:P.indexOf(y.rank)+1,description:y.details};a.push(g)}}catch(A){b=!0,m=A}finally{try{d||null==p.return||p.return()}finally{if(b)throw m}}var k=!0,x=!1,w=void 0;try{for(var _,F=D()(this.tableVul);!(k=(_=F.next()).done);k=!0){var V=_.value,O={vulname:V.vulnerability,val:P.indexOf(V.rank)+1,description:V.details};r.push(O)}}catch(A){x=!0,w=A}finally{try{k||null==F.return||F.return()}finally{if(x)throw w}}this.$http({method:"POST",url:"/sys/submit",emulateJSON:!0,body:v()({systemname:this.systemname,description:"目标："+this.aim+"&&&范围："+this.range+"&&&成员："+this.team+"&&&",method:e,assets:l,threats:a,vulnerabilities:r,results:this.tva_results})}).then(function(e){e.ok&&0===e.body.status?t.messageBox("提示","结果已提交至服务器"):t.messageBox("提交错误",e.body.error)},function(e){t.messageBox("提交错误",e.body.error)}),this.resultDialogVisible=!1}}},B=j,L=(l("383e"),l("e099"),Object(n["a"])(B,A,T,!1,null,"28f92601",null)),W=L.exports;a["default"].use(d["a"]);var z=new d["a"]({routes:[{path:"/",name:"login",component:k},{path:"/mainPage",name:"mainPage",component:O},{path:"/new",name:"new",component:W}]}),N=l("28dd");a["default"].use(N["a"]),a["default"].config.productionTip=!1,new a["default"]({router:z,render:function(t){return t(u)}}).$mount("#app")},"64a9":function(t,e,l){},8516:function(t,e,l){},"8e5e":function(t,e,l){"use strict";var a=l("cf11"),r=l.n(a);r.a},"8ed6":function(t,e,l){},9908:function(t,e,l){},cf11:function(t,e,l){},e099:function(t,e,l){"use strict";var a=l("9908"),r=l.n(a);r.a},e18c:function(t,e,l){"use strict";var a=l("8ed6"),r=l.n(a);r.a}});
//# sourceMappingURL=app.598f4010.js.map